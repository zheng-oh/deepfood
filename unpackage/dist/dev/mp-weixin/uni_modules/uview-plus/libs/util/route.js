"use strict";const a=require("../../../../common/vendor.js");class o{constructor(){this.config={type:"navigateTo",url:"",delta:1,params:{},animationType:"pop-in",animationDuration:300,intercept:!1},this.route=this.route.bind(this)}addRootPath(e){return e[0]==="/"?e:`/${e}`}mixinParam(e,i){e=e&&this.addRootPath(e);let t="";return/.*\/.*\?.*=.*/.test(e)?(t=a.index.$u.queryParams(i,!1),e+=`&${t}`):(t=a.index.$u.queryParams(i),e+=t)}async route(e={},i={}){let t={};typeof e=="string"?(t.url=this.mixinParam(e,i),t.type="navigateTo"):(t=a.index.$u.deepMerge(this.config,e),t.url=this.mixinParam(e.url,e.params)),t.url!==a.index.$u.page()&&(i.intercept&&(this.config.intercept=i.intercept),t.params=i,t=a.index.$u.deepMerge(this.config,t),typeof a.index.$u.routeIntercept=="function"?await new Promise((n,u)=>{a.index.$u.routeIntercept(t,n)})&&this.openPage(t):this.openPage(t))}openPage(e){const{url:i,type:t,delta:r,animationType:n,animationDuration:u}=e;(e.type=="navigateTo"||e.type=="to")&&a.index.navigateTo({url:i,animationType:n,animationDuration:u}),(e.type=="redirectTo"||e.type=="redirect")&&a.index.redirectTo({url:i}),(e.type=="switchTab"||e.type=="tab")&&a.index.switchTab({url:i}),(e.type=="reLaunch"||e.type=="launch")&&a.index.reLaunch({url:i}),(e.type=="navigateBack"||e.type=="back")&&a.index.navigateBack({delta:r})}}const s=new o().route;exports.route=s;
