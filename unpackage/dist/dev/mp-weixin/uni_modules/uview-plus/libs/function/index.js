"use strict";const f=require("../../../../common/vendor.js"),l=require("./test.js"),h=require("./digit.js");function x(e=0,t=0,n=0){return Math.max(e,Math.min(t,Number(n)))}function y(e,t=!1){return l.test.number(e)?t?`${e}px`:Number(e):/(rpx|upx)$/.test(e)?t?`${f.index.upx2px(parseInt(e))}px`:Number(f.index.upx2px(parseInt(e))):t?`${parseInt(e)}px`:parseInt(e)}function w(e=30){return new Promise(t=>{setTimeout(()=>{t()},e)})}function b(){return f.index.getSystemInfoSync().platform.toLowerCase()}function m(){return f.index.getSystemInfoSync()}function I(e,t){if(e>=0&&t>0&&t>=e){const n=t-e+1;return Math.floor(Math.random()*n+e)}return 0}function M(e=32,t=!0,n=null){const i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),r=[];if(n=n||i.length,e)for(let o=0;o<e;o++)r[o]=i[0|Math.random()*n];else{let o;r[8]=r[13]=r[18]=r[23]="-",r[14]="4";for(let s=0;s<36;s++)r[s]||(o=0|Math.random()*16,r[s]=i[s==19?o&3|8:o])}return t?(r.shift(),`u${r.join("")}`):r.join("")}function S(e=void 0){let t=this.$parent;for(;t;)if(t.$options&&t.$options.name!==e)t=t.$parent;else return t;return!1}function k(e,t="object"){if(l.test.empty(e)||typeof e=="object"&&t==="object"||t==="string"&&typeof e=="string")return e;if(t==="object"){e=p(e);const i=e.split(";"),r={};for(let o=0;o<i.length;o++)if(i[o]){const s=i[o].split(":");r[p(s[0])]=p(s[1])}return r}let n="";for(const i in e){const r=i.replace(/([A-Z])/g,"-$1").toLowerCase();n+=`${r}:${e[i]};`}return p(n)}function P(e="auto",t=""){return t||(t=f.index.$u.config.unit||"px"),e=String(e),l.test.number(e)?`${e}${t}`:e}function a(e){if([null,void 0,NaN,!1].includes(e)||typeof e!="object"&&typeof e!="function")return e;const t=l.test.array(e)?[]:{};for(const n in e)e.hasOwnProperty(n)&&(t[n]=typeof e[n]=="object"?a(e[n]):e[n]);return t}function $(e={},t={}){if(e=a(e),typeof e!="object"||typeof t!="object")return!1;for(const n in t)t.hasOwnProperty(n)&&(n in e?t[n]==null||typeof e[n]!="object"||typeof t[n]!="object"?e[n]=t[n]:e[n].concat&&t[n].concat?e[n]=e[n].concat(t[n]):e[n]=$(e[n],t[n]):e[n]=t[n]);return e}function N(e){console.error(`uView提示：${e}`)}function O(e=[]){return e.sort(()=>Math.random()-.5)}String.prototype.padStart||(String.prototype.padStart=function(e,t=" "){if(Object.prototype.toString.call(t)!=="[object String]")throw new TypeError("fillString must be String");const n=this;if(n.length>=e)return String(n);const i=e-n.length;let r=Math.ceil(i/t.length);for(;r>>=1;)t+=t,r===1&&(t+=t);return t.slice(0,i)+n});function g(e=null,t="yyyy-mm-dd"){let n;e?/^\d{10}$/.test(e.toString().trim())?n=new Date(e*1e3):typeof e=="string"&&/^\d+$/.test(e.trim())?n=new Date(Number(e)):n=new Date(typeof e=="string"?e.replace(/-/g,"/"):e):n=new Date;const i={y:n.getFullYear().toString(),m:(n.getMonth()+1).toString().padStart(2,"0"),d:n.getDate().toString().padStart(2,"0"),h:n.getHours().toString().padStart(2,"0"),M:n.getMinutes().toString().padStart(2,"0"),s:n.getSeconds().toString().padStart(2,"0")};for(const r in i){const[o]=new RegExp(`${r}+`).exec(t)||[];if(o){const s=r==="y"&&o.length===2?2:0;t=t.replace(o,i[r].slice(s))}}return t}function D(e=null,t="yyyy-mm-dd"){e==null&&(e=Number(new Date)),e=parseInt(e),e.toString().length==10&&(e*=1e3);let n=new Date().getTime()-e;n=parseInt(n/1e3);let i="";switch(!0){case n<300:i="刚刚";break;case(n>=300&&n<3600):i=`${parseInt(n/60)}分钟前`;break;case(n>=3600&&n<86400):i=`${parseInt(n/3600)}小时前`;break;case(n>=86400&&n<2592e3):i=`${parseInt(n/86400)}天前`;break;default:t===!1?n>=2592e3&&n<365*86400?i=`${parseInt(n/(86400*30))}个月前`:i=`${parseInt(n/(86400*365))}年前`:i=g(e,t)}return i}function p(e,t="both"){return e=String(e),t=="both"?e.replace(/^\s+|\s+$/g,""):t=="left"?e.replace(/^\s*/,""):t=="right"?e.replace(/(\s*$)/g,""):t=="all"?e.replace(/\s+/g,""):e}function E(e={},t=!0,n="brackets"){const i=t?"?":"",r=[];["indices","brackets","repeat","comma"].indexOf(n)==-1&&(n="brackets");for(const o in e){const s=e[o];if(!(["",void 0,null].indexOf(s)>=0))if(s.constructor===Array)switch(n){case"indices":for(let c=0;c<s.length;c++)r.push(`${o}[${c}]=${s[c]}`);break;case"brackets":s.forEach(c=>{r.push(`${o}[]=${c}`)});break;case"repeat":s.forEach(c=>{r.push(`${o}=${c}`)});break;case"comma":let u="";s.forEach(c=>{u+=(u?",":"")+c}),r.push(`${o}=${u}`);break;default:s.forEach(c=>{r.push(`${o}[]=${c}`)})}else r.push(`${o}=${s}`)}return r.length?i+r.join("&"):""}function _(e,t=2e3){f.index.showToast({title:String(e),icon:"none",duration:t})}function C(e="success",t=!1){["primary","info","error","warning","success"].indexOf(e)==-1&&(e="success");let n="";switch(e){case"primary":n="info-circle";break;case"info":n="info-circle";break;case"error":n="close-circle";break;case"warning":n="error-circle";break;case"success":n="checkmark-circle";break;default:n="checkmark-circle"}return t&&(n+="-fill"),n}function F(e,t=0,n=".",i=","){e=`${e}`.replace(/[^0-9+-Ee.]/g,"");const r=isFinite(+e)?+e:0,o=isFinite(+t)?Math.abs(t):0,s=typeof i>"u"?",":i,u=typeof n>"u"?".":n;let c="";c=(o?h.round(r,o)+"":`${Math.round(r)}`).split(".");const d=/(-?\d+)(\d{3})/;for(;d.test(c[0]);)c[0]=c[0].replace(d,`$1${s}$2`);return(c[1]||"").length<o&&(c[1]=c[1]||"",c[1]+=new Array(o-c[1].length+1).join("0")),c.join(u)}function A(e,t=!0){const n=parseInt(e);return t?/s$/.test(e)?e:e>30?`${e}ms`:`${e}s`:/ms$/.test(e)?n:/s$/.test(e)?n>30?n:n*1e3:n}function q(e){return`00${e}`.slice(-2)}function z(e,t){const n=f.index.$u.$parent.call(e,"u-form-item"),i=f.index.$u.$parent.call(e,"u-form");n&&i&&i.validateField(n.prop,()=>{},t)}function L(e,t){if(e){if(typeof t!="string"||t==="")return"";if(t.indexOf(".")!==-1){const n=t.split(".");let i=e[n[0]]||{};for(let r=1;r<n.length;r++)i&&(i=i[n[r]]);return i}return e[t]}}function V(e,t,n){if(!e)return;const i=function(r,o,s){if(o.length===1){r[o[0]]=s;return}for(;o.length>1;){const u=o[0];(!r[u]||typeof r[u]!="object")&&(r[u]={}),o.shift(),i(r[u],o,s)}};if(!(typeof t!="string"||t===""))if(t.indexOf(".")!==-1){const r=t.split(".");i(e,r,n)}else e[t]=n}function Z(){const e=getCurrentPages();return`/${e[e.length-1].route||""}`}function j(){return getCurrentPages()}function H({props:e={},config:t={},color:n={},zIndex:i={}}){const{deepMerge:r}=f.index.$u;f.index.$u.config=r(f.index.$u.config,t),f.index.$u.props=r(f.index.$u.props,e),f.index.$u.color=r(f.index.$u.color,n),f.index.$u.zIndex=r(f.index.$u.zIndex,i)}const R={range:x,getPx:y,sleep:w,os:b,sys:m,random:I,guid:M,$parent:S,addStyle:k,addUnit:P,deepClone:a,deepMerge:$,error:N,randomArray:O,timeFormat:g,timeFrom:D,trim:p,queryParams:E,toast:_,type2icon:C,priceFormat:F,getDuration:A,padZero:q,formValidate:z,getProperty:L,setProperty:V,page:Z,pages:j,setConfig:H};exports.index=R;
