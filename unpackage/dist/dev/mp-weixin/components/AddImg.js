"use strict";const e=require("../common/vendor.js"),g=require("../stores/img.js"),c={__name:"AddImg",setup(m){const n=g.useImgStore();e.ref(0);const i=()=>{e.index.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:a=>{const t=a.tempFilePaths;n.imgInfo.url=t[0],e.index.getImageInfo({src:t[0],success:o=>{n.imgInfo.url=o.path,n.imgInfo.width=o.width,n.imgInfo.height=o.height,n.imgInfo.ratio=n.imgInfo.width/n.imgInfo.height,console.log("imgInfo",n.imgInfo),s()}})}})},s=()=>{n.imgInfo.is_kuan?(n.canvasInfo.width=Math.round(n.canvasInfo.tagwidth),n.canvasInfo.height=Math.round(n.canvasInfo.tagwidth/n.imgInfo.ratio),console.log("canvasInfo:",n.canvasInfo.tagwidth,n.canvasInfo.width)):(n.canvasInfo.height=n.canvasInfo.tagheight,n.canvasInfo.width=Math.round(n.canvasInfo.tagheight*n.imgInfo.ratio))};return(a,t)=>e.e({a:e.t(e.unref(n).imgInfo.url?"Alter Image":"Add Image"),b:e.o(i),c:e.unref(n).imgInfo.url},e.unref(n).imgInfo.url?{d:e.o((...o)=>e.unref(n).deleteImage&&e.unref(n).deleteImage(...o))}:{})}},r=e._export_sfc(c,[["__file","/Users/xingzheng/Desktop/pickercolor/components/AddImg.vue"]]);wx.createComponent(r);
