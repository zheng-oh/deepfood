"use strict";const i=require("../common/vendor.js"),h=require("../stores/img.js"),s=()=>{const e=h.useImgStore();i.index.createSelectorQuery().select("#myCanvas").fields({node:!0,size:!0}).exec(o=>{const t=o[0].node;if(t){e.ctxImg=t.getContext("2d"),t.width=e.canvasInfo.width*e.drp,t.height=e.canvasInfo.height*e.drp;const r=t.createImage();r.src=e.imgInfo.url,r.onload=()=>{e.ctxImg.drawImage(r,0,0,t.width,t.height);const a=e.ctxImg.getImageData(0,0,t.width,t.height);e.imgInfo.data=a,e.imgInfo.is_kuan?(e.touchInfo.x_ratio=t.width/o[0].width,e.touchInfo.y_ratio=t.height/o[0].height):(e.touchInfo.y_ratio=t.height/o[0].height,e.touchInfo.x_ratio=e.touchInfo.y_ratio),e.pickerColor.hexColor="",i.index.createSelectorQuery().select("#myCursor").fields({node:!0,size:!0}).exec(c=>{const n=c[0].node;n&&(e.ctxCursor=n.getContext("2d"),n.width=e.canvasInfo.width*e.drp,n.height=e.canvasInfo.height*e.drp)})}}else console.error("Canvas element not found.")})};exports.drawImg=s;
